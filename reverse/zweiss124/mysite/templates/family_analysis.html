<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
html,body,h2,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.tooltip {
    position: relative;
    display: inline-block;
    border-bottom: 1px dotted black;
    font-family: sans-serif;
    font-weight: bold;
    text-align: center;
    font-size: 0.8em;
    line-height: 0.8em;
    border-radius: 50%;
    margin-left: 6px;
    padding: 0.13em 0.2em 0.09em 0.2em;
    color: inherit;
    border: 1px solid;
    text-decoration: none;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 220px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  font-size: 15px;

  /* Position the tooltip */
  position: absolute;
  z-index: 1;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}
h3 {
    /* margin: 0 auto; or use auto left/right margin instead of justify-content center */
    background-color:white;
    border-radius: 25px;
    border: 2px solid #96D1CD;
    padding: 20px;
    font-size: 1.4em;
}
</style>
<body>

<!-- Navbar -->

<div class="w3-top">
  <div class="w3-bar w3-theme w3-top w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-right w3-hide-large w3-hover-white w3-large w3-theme-l1" href="javascript:void(0)" onclick="w3_open()"><i class="fa fa-bars"></i></a>
    <a href="/home" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Home</a>
    <a href="/choose_rounds" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Analyze</a>
    <a href="/help" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Help</a>
    <a href="/tutorial" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Tutorial</a>
    <a href="/resources" class="w3-bar-item w3-button w3-hide-small w3-hide-medium w3-hover-white">Other Resources</a>
    <a href="/contact" class="w3-bar-item w3-button w3-hide-small w3-hide-medium w3-hover-white">Contact</a>

  </div>
</div>
<div class="w3-row w3-padding-64">
    <div class="w3-twothird w3-container">
        <h2 STYLE="color:#2a7f87" class="w3-row">Cluster Sequences and Analyze Sequence Clusters</h2>
        <form action="/preview_back" method="post">
            <button class="btn btn-primary" type="submit">Back</button>
        </form>
        {% if num_rounds == 1 %}
        <h4>Note: Showing limited functionality because only one round was uploaded (no dynamic analysis possible)</h4>
        {% endif %}
        <br>
        <p STYLE="font-size:15px">Upload Times: {{times}}
        <form class="w3-row" action="/clustering" method="post">
            <h3>Download Clustered Sequences
            <div STYLE="font-size:15px" class="tooltip">?
                <span class="tooltiptext">Given your input of the maximum Most Abundant Clusters, the optimal Most Abundant Clusters will be calculated. It will generate a .CSV file with the sequences, their counts, and their assigned cluster.</span>
            </div>

            <div class="form-group">
                <input autocomplete="off" autofocus name="clustering" placeholder="Number of Clusters" type="numeric" min="1" max="10000">
            </div>
            <br>
            <button class="btn btn-primary" type="submit">Analyze</button>
            </h3>
        </form>


        <br>
        <form class="w3-row" action="/most_abundant_fams" method="post">
            <h3>Clusters Finder
            <div STYLE="font-size:15px" class="tooltip">?
                <span class="tooltiptext">This will output the most abundant cluster peak sequences (a larger input number will take longer to run).</span>
            </div>
            <div class="form-group">
                <input autocomplete="off" autofocus name="abund_fams" placeholder="Number of Clusters" type="numeric" min="1" max="10000">
            </div>
            <div class="form-group">
                <input autocomplete="off" autofocus name="fam_abun" placeholder="Most Abundant Clusters" type="numeric" min="1" max="100">
            </div>
            <br>
            <button class="btn btn-primary" type="submit">Analyze</button>
            </h3>
        </form>

        <br>
        <form class="w3-row" action="/conserved" method="post">
            <h3>Conservation Finder
            <div STYLE="font-size:15px" class="tooltip">?
                <span class="tooltiptext">This will generate a heatmap showing the distribution of nucleotides at each position.</span>
            </div>
            <div class="form-group">
                <input autocomplete="off" autofocus name="clusters" placeholder="Number of Clusters" type="numeric" min="1" max="10000">
            </div>
            <p STYLE="font-size:15px"> Cutoff for a position to be considered conserved (e.g. 90 = 90% of the sequences must have a C at position 10)?</p>
            <div class="form-group">
                <input autocomplete="off" autofocus name="conserved" placeholder="Conserved Cutoff" type="numeric" min="1" max="100">
            </div>

            <p STYLE="font-size:15px"> Which cluster do you want to analyze (default = 1)?</p>
            <div class="form-group">
                <input autocomplete="off" autofocus name="rank" placeholder="Cluster Rank" type="numeric" min="1" max="10000">
            </div>
           <div class="form-group">
                <p STYLE="font-size:15px">Color scheme for heat map?</p>
                <input STYLE="font-size:15px" type="radio" name="hm_cmap" value="red"> Reds <br>
                <input STYLE="font-size:15px" type="radio" name="hm_cmap" value="blue"> Blues <br>
                <input STYLE="font-size:15px" type="radio" name="hm_cmap" value="bw"> Black+White <br>
            </div>
            <br>
            <button class="btn btn-primary" type="submit">Analyze</button>
            </h3>
        </form>
        <br>
        {% if num_rounds > 1 %}
        <br>
        <form class="w3-row" action="/track_fams" method="post">
            <h3>Cluster Tracker
            <div STYLE="font-size:15px" class="tooltip">?
                <span class="tooltiptext">Generate figures that calculate the fraction abundance of each of the most common clusters in each round of selection. Use this to understand when enrichment occured and how much it varies by round.</span>
            </div>
            <div class="form-group">
                <input autocomplete="off" autofocus name="track_fams" placeholder="Number of Clusters" type="numeric" min="1" max="10000">
            </div>
            <div class="form-group">
                <input autocomplete="off" autofocus name="fam_track" placeholder="Most Abundant Clusters" type="numeric" min="1" max="100">
            </div>
            <br>
            <button class="btn btn-primary" type="submit">Analyze</button>
            </h3>
        </form>
        {% endif %}

        <!--
        {% if num_rounds > 1 %}
        <br>
        <form class="w3-row" action="/fam_emergence" method="post">
            <h3>Cluster Similarity Finder
            <div STYLE="font-size:15px" class="tooltip">?
                <span class="tooltiptext">Generate a heatmap that compares the top clusters in each round to each of the other rounds. This gives insight into when each of the most abundant clusters was selected for.</span>
            </div>
            <div class="form-group">
                <input autocomplete="off" autofocus name="track_fams" placeholder="Number of Clusters" type="numeric" min="1" max="10000">
            </div>
            <div class="form-group">
                <input autocomplete="off" autofocus name="fam_emergence" placeholder="Most Abundant Clusters" type="numeric" min="1" max="100">
                <br>
                <p STYLE="font-size:15px">Color scheme for heat map?</p>
                <input STYLE="font-size:15px" type="radio" name="fe_cmap" value="red"> Reds <br>
                <input STYLE="font-size:15px" type="radio" name="fe_cmap" value="blue"> Blues <br>
                <input STYLE="font-size:15px" type="radio" name="fe_cmap" value="bw"> Black+White <br>

            </div>
            <br>
            <button class="btn btn-primary" type="submit">Analyze</button>
            </h3>
        </form>
        {% endif %}
        -->

  </div>
</div>
    </body>
</html>